name: Build

on:
  push:
    paths:
      - ".github/**"
      - "src/**"
      - "tests/**"
      - "*.rs"
      - "Cargo.toml"
      - "Cargo.lock"
env:
  IS_RELEASE: ${{ startsWith(github.ref, 'refs/tags/v') }}

jobs:
  tests:
    uses: ./.github/workflows/rust-test.yml

  build-macos-x86_64:
    runs-on: macos-latest

    steps:
      - uses: actions/checkout@v4
      - name: build-macos-x86_64
        run: cargo build --target x86_64-apple-darwin